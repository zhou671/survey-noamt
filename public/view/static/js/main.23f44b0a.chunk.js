(this["webpackJsonpreact-survey"]=this["webpackJsonpreact-survey"]||[]).push([[0],{161:function(e,t,n){},162:function(e,t,n){},164:function(e,t,n){},166:function(e,t,n){},479:function(e,t,n){},480:function(e,t,n){"use strict";n.r(t);var c=n(7),o=n.n(c),i=n(28),r=n.n(i),a=(n(161),n(47)),s=n.n(a),l=n(70),u=n(12),j=(n(162),n(10)),b=function(e){var t=e.onRegister,n=Object(c.useState)(""),o=Object(u.a)(n,2),i=o[0],r=o[1];return Object(j.jsxs)("main",{id:"main-holder",children:[Object(j.jsx)("h1",{id:"login-header",children:"Login"}),Object(j.jsx)("p",{children:"Welcome to the perceptual similiarty on 3D shape survey!"}),Object(j.jsx)("p",{children:'Please enter your Amazon Machine Turk workId and click on "Enter Survey" to begin or continue. '}),Object(j.jsxs)("form",{id:"login-form",onSubmit:function(e){e.preventDefault(),i?i.length>100?alert("Please enter a userName less than 100 characters"):t(i):alert("Please input your userName")},children:[Object(j.jsx)("input",{type:"text",id:"username-field",class:"login-form-field",placeholder:"UserName",value:i,onChange:function(e){return r(e.target.value)}}),Object(j.jsx)("input",{type:"submit",value:"Enter Survey",id:"login-form-submit"})]})]})},h=n(32),d=function(e){var t=e.text,n=e.onClick;return Object(j.jsx)("button",{onClick:n,id:"login-form-submit",children:t})},f=n(29),p=n(483),O=(n(164),function(e){var t,n=e.object,c=e.orbitRef,o=e.onClick,i=e.model,r=e.render?Object(j.jsx)(d,{text:i,onClick:o}):null,a=[],s=Object(h.a)([[.5773502691896257,-1,-1.5115226281523415],[-1.1547005383792515,0,-1.5115226281523415],[.5773502691896257,1,-1.5115226281523415],[-.9341723589627157,-1.618033988749895,-.35682208977308993],[1.8683447179254313,0,-.35682208977308993],[-.9341723589627157,1.618033988749895,-.35682208977308993],[.9341723589627157,-1.618033988749895,.35682208977308993],[-1.8683447179254313,0,.35682208977308993],[.9341723589627157,1.618033988749895,.35682208977308993],[-.5773502691896257,-1,1.5115226281523415],[1.1547005383792515,0,1.5115226281523415],[-.5773502691896257,1,1.5115226281523415]].entries());try{for(s.s();!(t=s.n()).done;){var l=Object(u.a)(t.value,2),b=(l[0],l[1]);a.push(Object(j.jsx)("pointLight",{position:b,intensity:.1}))}}catch(O){s.e(O)}finally{s.f()}return Object(j.jsxs)("div",{class:"float-child",children:[Object(j.jsxs)(f.a,{camera:{position:[0,0,1],fov:60},children:[Object(j.jsx)(p.a,{ref:c}),a,Object(j.jsxs)("mesh",{position:[0,0,0],children:[Object(j.jsx)("primitive",{object:n}),Object(j.jsx)("meshPhongMaterial",{attach:"material",color:"#ffffff"})]})]}),r]})}),g=n(155),x=[],m=(n(166),n(167),n(144)),v=function(e){var t=e.url,n=e.nextseq,o=e.userId,i=e.fileNames,r=e.choiceurl,a=e.uniqueurl,s=Object(c.useState)(0),l=Object(u.a)(s,2),b=l[0],h=l[1],d=Object(c.useState)(n),p=Object(u.a)(d,2),v=p[0],y=p[1],k=Object(c.useState)(void 0),C=Object(u.a)(k,2),w=(C[0],C[1]),S=Object(c.useState)(!1),q=Object(u.a)(S,2),I=q[0],P=q[1],R=Object(c.useCallback)((function(e){w({current:e}),function(e){e&&(x.push(e),e.addEventListener("change",(function(t){x.forEach((function(n){if(n!==e){var c=t.target.object.position;n.object.position.set(c.x,c.y,c.z);var o=t.target.object.rotation;n.object.rotation.set(o.x,o.y,o.z),n.object.zoom=t.target.object.zoom,n.target=t.target.target,n.object.updateProjectionMatrix()}}))})))}(e)}),[]),E=Object(c.useState)("0"),L=Object(u.a)(E,2),N=L[0],z=L[1],T=[];i.forEach((function(e,n,c){"null"===e&&(0!=n&&console.log(c[n-1]),n!=i.length-1&&console.log(c[n+1])),T.push(t+e+"-ori.obj"),T.push(t+e+"-1.obj"),T.push(t+e+"-2.obj")}));var F=Object(f.c)(g.a,T),M=function(e){return function(){m.get(r+o+"/"+v+"/"+e+"/"+i[b]),y(v+1),h(b+1),console.log(b),console.log(F.length),3*b==F.length-3?m.get(a+o).then((function(e){var t=e.data;console.log(t.uniqueCode),z(t.uniqueCode),P(!0)})):(F[3*b+0].children.splice(-1),F[3*b+1].children.splice(-1),F[3*b+2].children.splice(-1))}};return Object(j.jsxs)("main",{id:"main-holder",children:[Object(j.jsx)("h1",{id:"login-header",children:"Survey"}),Object(j.jsx)("p",{children:"Please click the left or right shape button that you think which is more similar to the middle one."}),Object(j.jsx)("p",{children:'In the case of failing to load shape or it is too close to determine, please click "Choose none"'}),Object(j.jsx)("div",{class:"float-container",children:I?Object(j.jsxs)("p",{children:[" You have completed all the tasks! Your unique code is ",N,". Thanks for taking this survey! However, please refresh the page to check if you have completed the survey. "]}):[Object(j.jsx)(O,{object:F[3*b+1],orbitRef:R,onClick:M("1"),model:"Left shape",render:!0}),Object(j.jsx)(O,{object:F[3*b+0],orbitRef:R,onClick:M("3"),model:"Choose none",render:!0}),Object(j.jsx)(O,{object:F[3*b+2],orbitRef:R,onClick:M("2"),model:"Right shape",render:!0})]})]})},y=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("h1",{children:"loading.."})})},k=(n(479),n(144)),C=window.location.origin,w=C+"/api/checkuser/",S=C+"/api/getfile/",q=C+"/api/makeselection/",I=C+"/api/getuniquecode/";var P=function(){var e=Object(c.useState)(!0),t=Object(u.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)(0),r=Object(u.a)(i,2),a=r[0],h=r[1],d=Object(c.useState)(""),f=Object(u.a)(d,2),p=f[0],O=f[1],g=Object(c.useState)(),x=Object(u.a)(g,2),m=x[0],C=x[1],P=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get(w+t);case 2:n=e.sent,c=n.data,O(t),h(parseInt(c.nextId)),C(c.fileName),o(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(t){return!1}}()?Object(j.jsx)("body",{children:n?Object(j.jsx)(b,{onRegister:P}):Object(j.jsx)(c.Suspense,{fallback:Object(j.jsx)(y,{}),children:Object(j.jsx)(v,{url:S,nextseq:a,userId:p,fileNames:m,choiceurl:q,uniqueurl:I})})}):Object(j.jsx)("body",{children:"This survey needs support of webgl, please either switch a brower or enable webgl."})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,484)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),i(e),r(e)}))};r.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(P,{})}),document.getElementById("root")),R()}},[[480,1,2]]]);
//# sourceMappingURL=main.23f44b0a.chunk.js.map